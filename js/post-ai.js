function allAI(){let e=!0,t=document.querySelector(".ai-explanation"),n=document.querySelector(".ai-explanation-none").innerHTML,i=document.querySelector(".post-ai"),r=document.querySelectorAll(".ai-btn-item"),a="",o="",l=600,c=0,s=0,m=[],d=0;const u=n=>{if(e)if(u.start||(u.start=n),d=n-u.start,d>=20){if(u.start=n,c<o-1){let e=a.charAt(c+1),n=/[,.，。!?！？]/.test(e)?150:20;t.firstElementChild&&t.removeChild(t.firstElementChild),t.innerHTML+=e;let i=document.createElement("div");i.className="ai-cursor",t.appendChild(i),c++,150===n&&(document.querySelector(".ai-explanation .ai-cursor").style.opacity="0"),c===o-1&&(h.disconnect(),t.removeChild(t.firstElementChild)),m[0]=setTimeout((()=>{requestAnimationFrame(u)}),n)}}else requestAnimationFrame(u)},h=new IntersectionObserver((n=>{let i=n[0].isIntersecting;e=i,e&&(l=0===c?200:20,m[1]=setTimeout((()=>{s&&(c=0,s=0),0===c&&(t.innerHTML=a.charAt(0)),requestAnimationFrame(u)}),l))}),{threshold:0});function p(){m.length&&m.forEach((e=>{e&&clearTimeout(e)}))}function f(n,r=!0){c=0,s=1,p(),e=!1,d=0,t.innerHTML=r?"生成中. . .":"请等待. . .",a=n,o=a.length,h.disconnect(),h.observe(i)}function q(){f("我是文章辅助AI: QX-AI，点击下方的按钮，让我生成本文简介、推荐相关文章等。")}function y(){c=0,s=1,p(),e=!1,d=0,t.innerHTML="生成中. . .",a="",o="",h.disconnect(),m[2]=setTimeout((()=>{t.innerHTML=function(){let e="推荐文章：<br />",t=document.querySelectorAll(".card-recommend-post .aside-list .aside-list-item .thumbnail");t||(e="很抱歉，无法找到类似的文章，你也可以看看本站最新发布的文章：<br />",t=document.querySelectorAll(".card-recent-post .aside-list .aside-list-item .thumbnail"));return e+='<div class="ai-recommend">',t.forEach(((t,n)=>{e+=`<div class="ai-recommend-item"><span>推荐${n+1}：</span><a href="javascript:;" onclick="pjax.loadUrl('${t.href}')" title="${t.title}" data-pjax-state="">${t.title}</a></div>`})),e+="</div>",e}()}),300)}t=document.querySelector(".ai-explanation"),n=document.querySelector(".ai-explanation-none").innerHTML,i=document.querySelector(".post-ai"),r=document.querySelectorAll(".ai-btn-item"),r.forEach(((e,t)=>{e.addEventListener("click",(()=>{switch(t){case 0:q();break;case 1:f(n);break;case 2:y();break;case 3:f("正在前往博客主页...",!1),m[2]=setTimeout((()=>{pjax.loadUrl("/")}),1e3)}}))})),q(),console.log(111)}allAI();